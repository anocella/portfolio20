<!DOCTYPE html>
<html>
<head>
  <!-- Site made with Mobirise Website Builder v3.12.1, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v3.12.1, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="assets/images/mbr-192x128.jpg" type="image/x-icon">
  <meta name="description" content="Asset Correlation">
  <title>Asset Correlation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic&amp;subset=latin">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
  <link rel="stylesheet" href="assets/bootstrap-material-design-font/css/material.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/animate.css/animate.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">

  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <!-- Bootstrap Date-Picker Plugin -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

    <style>
      rect {
          stroke: lightgray;
          stoke-width: 1px;
          fill: none;
      }

      svg {
        font: 16px sans-serif;
        text-anchor: middle;
        font-weight: bold;
      }

      .y.axis path{
        fill: none;
        stroke: none;
      }

  </style>

</head>
<body>
<section id="menu-j">

    <nav class="navbar navbar-dropdown navbar-fixed-top">
        <div class="container">

            <div class="mbr-table">
                <div class="mbr-table-cell">

                    <div class="navbar-brand">
                        <a href="https://mobirise.com" class="socicon socicon-paypal mbr-iconfont mbr-iconfont-menu navbar-logo"></a>
                        <a class="navbar-caption" href="index.html">Portfolio 2.0</a>
                    </div>

                </div>
                <div class="mbr-table-cell">

                    <button class="navbar-toggler pull-xs-right hidden-md-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar">
                        <div class="hamburger-icon"></div>
                    </button>

                    <ul class="nav-dropdown collapse pull-xs-right nav navbar-nav navbar-toggleable-sm" id="exCollapsingNavbar"><li class="nav-item"><a class="nav-link link" href="index.html">OVERVIEW</a></li><li class="nav-item dropdown"><a class="nav-link link dropdown-toggle" data-toggle="dropdown-submenu" href="index.html" aria-expanded="false">FEATURES</a><div class="dropdown-menu"><a class="dropdown-item" href="selection.html">Portfolio Selection</a><a class="dropdown-item" href="performance.html">Portfolio Performance</a><a class="dropdown-item" href="optimizer.html">Portfolio Optimizer</a><a class="dropdown-item" href="correlation.html">Asset Correlation</a></div></li><li class="nav-item dropdown"><a class="nav-link link dropdown-toggle" data-toggle="dropdown-submenu" href="index.html" aria-expanded="false">HELP</a><div class="dropdown-menu"><a class="dropdown-item" href="forum.html">Forum</a><a class="dropdown-item" href="tutorial.html">Tutorials</a><a class="dropdown-item" href="contact.html">Contact us</a></div></li></ul>
                    <button hidden="" class="navbar-toggler navbar-close" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar">
                        <div class="close-icon"></div>
                    </button>

                </div>
            </div>

        </div>
    </nav>

</section>

<section class="engine"><a rel="external" href="https://mobirise.com">Website Maker</a></section><section class="mbr-section mbr-section-hero mbr-section-full mbr-section-with-arrow mbr-after-navbar" id="header5-14" style="background-color: rgb(239, 239, 239);">



    <div class="mbr-table-cell">

        <div class="container">
            <div class="row">
                <div id="chart" class="mbr-section col-md-10">

                    <h1 class="mbr-section-title display-1">Asset Correlation</h1>
                    <!--p class="mbr-section-lead lead">Full screen intro with color background.<br>Buttons, text and title are aligned to the left.</p--	>
					<div class="bootstrap-iso">
					 <div class="container-fluid">
					  <div class="row">
					   <div class="col-md-6 col-sm-6 col-xs-12">

						<!-- Form code begins -->
						<form method="post">
						  <div class="form-group"> <!-- Date input -->
							<label class="control-label" for="date">Date</label>
							<input class="form-control" id="date" name="date" placeholder="MM/DD/YYY" type="text"/>
						  </div>
						  <div class="form-group"> <!-- Submit button -->
							<button class="btn btn-primary " name="submit" type="submit">Submit</button>
						  </div>
						 </form>
						 <!-- Form code ends -->

						</div>
					  </div>
					 </div>
					 <script>
					     $(document).ready(function(){
					       var date_input=$('input[name="date"]'); //our date input has the name "date"
					       var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
					       var options={
					         format: 'mm/dd/yyyy',
					         container: container,
					         todayHighlight: true,
					         autoclose: true,
					       };
					       date_input.datepicker(options);
					     })
					 </script>
					  <script>
					  function drawThings(dataUrl) {
					    //var dataUrl = "http://localhost:5000/corr?startDate=01/02/1991&endDate=01/02/2010"
					    d3.csv(dataUrl, function(error, rows) {
					      var data = [];

					      rows.forEach(function(d) {
					        var x = d[" "];
					        delete d[" "];
					        for (prop in d) {
					          var y = prop,
					            value = d[prop];
					          data.push({
					            x: x,
					            y: y,
					            value: +value
					          });
					        }
					      });

						  var margin = {
							  top: 25,
							  right: 100,
							  bottom: 25,
							  left: 25
							},
							width = 1280 - margin.left - margin.right,
							height = 760 - margin.top - margin.bottom,
							domain = d3.set(data.map(function(d) {
							  return d.x
							})).values(),
							num = Math.sqrt(data.length),
							color = d3.scale.linear()
							  .domain([-1, 0, 1])
							  .range([d3.hsl(240, .40, .6), d3.hsl(120, .40, .6), d3.hsl(0, .80, .5)]);

						  var x = d3.scale
							.ordinal()
							.rangePoints([0, width])
							.domain(domain),
						  y = d3.scale
							.ordinal()
							.rangePoints([0, height])
							.domain(domain),
						  xSpace = x.range()[1] - x.range()[0],
	  					  ySpace = y.range()[1] - y.range()[0];

					      var svg = d3.select("#chart")
					        .append("svg")
					        .attr("id", "corrChart")
					        .attr("width", width + margin.left + margin.right)
					        .attr("height", height + margin.top + margin.bottom)
					        .append("g")
					        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

					      var cor = svg.selectAll(".cor")
					        .data(data)
					        .enter()
					        .append("g")
					        .attr("class", "cor")
					        .attr("transform", function(d) {
					          return "translate(" + x(d.x) + "," + y(d.y) + ")";
					        });

					      cor.append("rect")
					        .attr("width", xSpace)
					        .attr("height", ySpace)
					        .attr("x", -xSpace / 2)
					        .attr("y", -ySpace / 2)

					      cor.filter(function(d){
					          var ypos = domain.indexOf(d.y);
					          var xpos = domain.indexOf(d.x);
					          for (var i = (ypos + 1); i < num; i++){
					            if (i === xpos) return false;
					          }
					          return true;
					        })
					        .append("text")
					        .attr("y", 5)
					        .text(function(d) {
					          if (d.x === d.y) {
					            return d.x;
					          } else {
					            return d.value.toFixed(2);
					          }
					        })
					        .style("font", function(d){
					          if (d.value === 1) {
					            return "10px sans-serif"
					          }
					        })
					        .style("font-weight", function(d){
					          if (d.value === 1) {
					            return "bold"
					          }
					        })
					        .style("fill", function(d){
					          if (d.value === 1) {
					            return "#000";
					          } else {
					            return color(d.value);
					          }
					        });

					        cor.filter(function(d){
					          var ypos = domain.indexOf(d.y);
					          var xpos = domain.indexOf(d.x);
					          for (var i = (ypos + 1); i < num; i++){
					            if (i === xpos) return true;
					          }
					          return false;
					        })
					        .append("circle")
					        .attr("r", function(d){
					          return (width / (num * 4)) * (Math.abs(d.value) + 0.1);
					        })
					        .style("fill", function(d){
					          if (d.value === 1) {
					            return "#000";
					          } else {
					            return color(d.value);
					          }
					        });

					    var aS = d3.scale
					      .linear()
					      .range([-margin.top + 10, height + margin.bottom - 10])
					      .domain([1, -1]);

					    var yA = d3.svg.axis()
					      .orient("right")
					      .scale(aS)
					      .tickPadding(7);

					    var aG = svg.append("g")
					      .attr("class", "y axis")
					      .call(yA)
					      .attr("transform", "translate(" + (width + margin.right / 2) + " ,0)")

					    var iR = d3.range(-1, 1.01, 0.01);
					    var h = height / iR.length + 3;
					    iR.forEach(function(d){
					        aG.append('rect')
					          .style('fill',color(d))
					          .style('stroke-width', 0)
					          .style('stoke', 'none')
					          .attr('height', h)
					          .attr('width', 10)
					          .attr('x', 0)
					          .attr('y', aS(d))
					      });
					    });
			}
			drawThings("http://localhost:5000/corr?startDate=01/02/2007&endDate=01/02/2010")
			drawThings("http://localhost:5000/corr?startDate=01/02/2007&endDate=01/02/2015")

  </script>

                </div>
            </div>
        </div>
    </div>

    <div class="mbr-arrow mbr-arrow-floating" aria-hidden="true"><a href="#footer1-k"><i class="mbr-arrow-icon"></i></a></div>

</section>

<footer class="mbr-small-footer mbr-section mbr-section-nopadding" id="footer1-k" style="background-color: rgb(50, 50, 50); padding-top: 1.75rem; padding-bottom: 1.75rem;">

    <div class="container">
        <p class="text-xs-center">Copyright (c) 2017 Portfolio 2.0</p>
    </div>
</footer>


  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smooth-scroll/smooth-scroll.js"></script>
  <script src="assets/viewport-checker/jquery.viewportchecker.js"></script>
  <script src="assets/dropdown/js/script.min.js"></script>
  <script src="assets/touch-swipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/theme/js/script.js"></script>


  <input name="animation" type="hidden">
  </body>
</html>